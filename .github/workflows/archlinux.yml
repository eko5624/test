name: archlinux
defaults:
  run:
    shell: bash
on:
  workflow_dispatch:
  
jobs:
  build:
    runs-on: ubuntu-latest
    container:
      image: archlinux/archlinux:base-devel
    steps:    
      - name: Install Dependencies
        run: |
          sudo echo -e "[multilib]\nInclude = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf
          sudo pacman -Syu --noconfirm docker
          sudo pacman -S --noconfirm --needed git mingw-w64-gcc cmake
          git config --global user.name "github-actions[bot]"
          git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git config --global pull.rebase true
          git config --global rebase.autoStash true
          git config --global fetch.prune true
          git config --global --add safe.directory /github/workspace

      - name: list all users
        run: |
          echo "列出所有用户============"
          cat /etc/passwd | cut -d: -f1
          echo "显示当前用户名==========="
          whoami
          echo "显示系统级makepkg.conf=============="
          cat /etc/makepkg.conf
          echo "显示sysusers.d的内容================"
          cat /usr/lib/sysusers.d

      - name: working directory without checkout
        run: |
          echo "显示当前路径=============="
          pwd
          
      - name: Checkout
        run: |
          git clone https://github.com/eko5624/test
          cd test
          pwd
          
      - name: working directory
        run: |
          echo "显示当前路径=============="
          pwd
          echo "显示变量github.workspace路径==============="
          echo "${{ github.workspace }}"
          echo "cmake================="
          which cmake
      
      - name: github path
        run: |
          echo "显示路径变量=============="
          echo "$PATH"
          echo "/usr=============="
          find /usr/local/ .
          echo "github home============="
          cd ~
          pwd
          find .
          echo "list /github=========="
          find /github
          echo "github workspace env============="
          echo "${{ github.workspace }}"

          
